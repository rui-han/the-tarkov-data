generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  // Uses connection pooling
  url       = env("POSTGRES_PRISMA_URL")
  // Uses direct connection, ⚠️ make sure to keep this to `POSTGRES_URL_NON_POOLING`
  // or you'll have dangling databases from migrations
  directUrl = env("POSTGRES_URL_NON_POOLING")
}

model User {
  auth0Id         String           @id
  name            String
  email           String           @unique
  image           String
  createdAt       DateTime         @default(now())
  favoriteBullets FavoriteBullet[]
}

model FavoriteBullet {
  id         String   @id @default(cuid())
  user       User     @relation(fields: [userId], references: [auth0Id])
  userId     String
  bulletName String
  bulletType String
  createdAt  DateTime @default(now())

  @@unique([userId, bulletName]) // Ensure a user can only favorite a specific bullet once
}
